{% extends 'base.html' %}

{% block title %}{{ novel.title }}{% endblock %}

{% block content %}
<div class="row py-4">
    <div class="col-md-4">
        <img src="{{ novel.img_url }}" class="img-fluid rounded shadow" alt="{{ chatbot.name }}"
             onerror="this.src='https://via.placeholder.com/300x400'">
    </div>
    <div class="col-md-8">
        <h1 class="mb-3 text-dark">{{ chatbot.name}}</h1>
        <p class="text-muted mb-1">
            <strong>{{ chatbot.showtype }}</strong> | {{ chatbot.language }} | {{ chatbot.year }}
        </p>

        <h4 class="mt-4">ğŸ“– Description</h4>
        <p class="text-secondary">{{ chatbot.description }}</p>

        <h4 class="mt-3">ğŸ·ï¸ Genres</h4>
        <p>{{ novel.genre }}</p>

        <h4 class="mt-3">ğŸ”– Tags</h4>
        <p>{{ novel.tags }}</p>

        <h4 class="mt-3">âœï¸ Author</h4>
        <p>{{ novel.author }}</p>

        {% if user.is_authenticated and not user_review %}
            <a href="{% url 'add_review' novel.id %}" class="btn btn-outline-dark rounded-pill mt-3">Add Review</a>
        {% endif %}
    </div>
</div>

<div class="row mt-5">
    <div class="col">
        <h2 class="mb-4 text-dark">ğŸ’¬ Reviews</h2>
        {% if reviews %}
            {% for review in reviews %}
                <div class="card mb-3 shadow-sm border-0" style="background-color: #fdfaf6;">
                    <div class="card-body">
                        <h5 class="card-title text-dark">{{ review.user.username }}</h5>
                        <h6 class="card-subtitle text-muted mb-2">Rating: {{ review.rating }}/5</h6>
                        <p class="card-text">{{ review.comment }}</p>
                        <small class="text-muted">{{ review.created_at|date:"F d, Y" }}</small>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="text-muted">No reviews yet.</p>
        {% endif %}
    </div>
</div>
{% endblock %}
